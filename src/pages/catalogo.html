<div class="row">
    <div class="page-header">
        <h1>Librería Virtual <small>Catálogo</small></h1>
    </div>
</div>

<div class="row filter_row">
    <div class="col-xs-12 col-sm-12 col-md-12">
        <form class="form-inline">
            <label for="Buscar">Buscar:</label>
            <input type="text" class="form-control" id="Buscar" ng-model="searchBook">
        </form>
    </div>
</div>

<div class="row">
    <div class="col-md-8">
        <div class="row">
            <div class="col-md-4 col-sm-4 col-xs-12" ng-repeat="book in bookStore.books | filter:searchBook">
                <div class="well">
                    <div class="row">
                        <h4 class="text-center">{{book.title}}</h4>
                    </div>
                    <div class="row">
                        <p class="text-center">
                            <a data-toggle="modal" data-target="#cover" ng-click="bookStore.selected = book"><img ng-src="{{book.cover}}" class="img-responsive grow"></a>
                        </p>
                    </div>
                    <div class="row">
                        <p class="text-center">&#8353;{{book.price}}</p>
                    </div>
                    <div class="row">
                        <p class="text-center"><a class="btn btn-primary" href="" role="button" ng-click="addToCart(book);">Agregar a carrito <span class="glyphicon glyphicon-shopping-cart" aria-hidden="true"></span></a></p>
                    </div>
                </div>
            </div>
            <div class="clearfix" ng-if="$index%3==2"></div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="row text-center">
            <div class="col-md-12">
                <h2>Carrito <span class="glyphicon glyphicon-shopping-cart" aria-hidden="true"></span></h2>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12 cart">
                <div ng-if="cart.length" class="row">
                    <div class="col-md-12">
                        <h4 class="text-info">{{cart.length}} libro<span ng-show="cart.length > 1">s</s></span> en carrito, &#8353;{{getCartPrice()}}</h4>
                    </div>

                    <div class="row">
                        <div class="col-xs-4 col-sm-3 col-md-4" ng-repeat="product in cart">
                            <img ng-src="{{product.cover}}" class="img-responsive">
                            <span class="badge quant" ng-show="product.quantity > 1">x{{product.quantity}}</span>
                            <a ng-show="product.quantity > 0" class="badge remove" href="" role="button" ng-click="removeFromCart(product)"><span class="glyphicon glyphicon-remove-sign"></span></a>
                        </div>
                    </div>
                    <p>
                        <a href="#checkout" class="btn btn-primary" role="button">Confirmar <span class="glyphicon glyphicon-check"></span></a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" tabindex="-1" role="dialog" id="cover">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">{{bookStore.selected.title}}</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-xs-4 col-sm-4 col-md-4"><img ng-src="{{bookStore.selected.cover}}" class="img-responsive grow"></div>
                    <div class="col-xs-8 col-sm-8 col-md-8">
                        <p>Autor: {{bookStore.selected.author}}
                            <br> Idioma: {{bookStore.selected.language}}
                            <br> Editorial: {{bookStore.selected.publisher}}
                            <br> Precio: &#8353;{{bookStore.selected.price}}
                            <br> Publicado: {{bookStore.selected.published}}
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>